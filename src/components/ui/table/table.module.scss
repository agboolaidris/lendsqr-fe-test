@use "../../../styles/mixins" as *;
@use "../../../styles/variables" as *;

.tableContainer {
  position: relative;
  width: 100%;
  overflow-x: auto;
  border-radius: $radius-md;
  background-color: var(--color-surface);
}

.table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-family: var(--font-work-sans);

  // Size variations
  &--sm {
    font-size: $font-xs;

    .tableHeaderCell,
    .tableCell {
      padding: $space-2 $space-3;
    }
  }

  &--md {
    font-size: $font-sm;

    .tableHeaderCell,
    .tableCell {
      padding: $space-3 $space-4;
    }
  }

  &--lg {
    font-size: $font-md;

    .tableHeaderCell,
    .tableCell {
      padding: $space-4 $space-5;
    }
  }
}

.tableStriped {
  .tableBody {
    .tableRow:nth-child(even) {
      background-color: oklch(0.98 0.004 83);
    }
  }
}

.tableBordered {
  border: 1px solid var(--color-border);
  border-radius: $radius-md;

  .tableHeaderCell,
  .tableCell {
    border-bottom: 1px solid var(--color-border);

    &:not(:last-child) {
      border-right: 1px solid var(--color-border);
    }
  }

  .tableHeader {
    .tableHeaderCell {
      border-bottom: 2px solid var(--color-border);
    }
  }
}

.tableHoverable {
  .tableBody {
    .tableRow {
      transition: background-color $transition-fast;

      &:hover {
        background-color: oklch(0.96 0.02 250);
      }

      &.clickableRow {
        cursor: pointer;

        &:hover {
          background-color: rgba(57, 205, 204, 0.1);
        }
      }
    }
  }
}

.tableHeader {
  background-color: oklch(0.98 0.004 83);
  position: sticky;
  top: 0;
  z-index: 1;
}

.tableHeaderCell {
  text-align: left;
  font-weight: 600;
  color: var(--color-text-secondary);
  white-space: nowrap;
  position: relative;
  user-select: none;

  &.sortable {
    cursor: pointer;

    &:hover {
      background-color: oklch(0.96 0.02 250);
    }
  }
}

.headerCellContent {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: $space-2;
}

.sortIndicator {
  display: flex;
  align-items: center;
  color: var(--color-primary);
}

.sortIcon {
  width: 16px;
  height: 16px;
  transition: transform $transition-fast;
}

.sortPlaceholder {
  width: 16px;
  height: 16px;
  opacity: 0;
}

.resizer {
  position: absolute;
  right: 0;
  top: 0;
  height: 100%;
  width: 5px;
  background: transparent;
  cursor: col-resize;
  user-select: none;
  touch-action: none;

  &[data-resizing="true"] {
    background: var(--color-primary);
    opacity: 0.5;
  }

  &:hover {
    background: var(--color-primary);
    opacity: 0.3;
  }
}

.tableBody {
  .tableRow {
    transition: background-color $transition-fast;
  }
}

.tableCell {
  color: var(--color-text-primary);
  vertical-align: middle;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.expandedRow {
  background-color: oklch(0.98 0.004 83);

  .expandedContent {
    padding: $space-4;
    background-color: var(--color-surface);
  }
}

// Loading state
.loadingState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: $space-10;
  color: var(--color-text-primary);
  opacity: 0.7;

  p {
    margin-top: $space-3;
    font-size: $font-sm;
  }
}

.loadingSpinner {
  width: 40px;
  height: 40px;
  color: var(--color-primary);
  animation: spin 1s linear infinite;
}

// Empty state
.emptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: $space-10;
  color: var(--color-text-primary);
  opacity: 0.6;
}

.emptyStateIcon {
  font-size: 48px;
  margin-bottom: $space-4;
}

.emptyStateText {
  font-size: $font-md;
  color: var(--color-text-secondary);
}

// Table Actions
.tableActions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: $space-4;
  background-color: var(--color-surface);
  border-top: 1px solid var(--color-border);
  flex-wrap: wrap;
  gap: $space-4;
}

.tableActionsLeft,
.tableActionsRight {
  display: flex;
  align-items: center;
  gap: $space-4;
}

.pageSizeSelector {
  display: flex;
  align-items: center;
  gap: $space-2;
  font-size: $font-sm;
}

.pageSizeLabel {
  color: var(--color-text-primary);
  opacity: 0.8;
}

.pageSizeSelect {
  padding: $space-1 $space-2;
  border-radius: $radius-sm;
  border: 1px solid var(--color-border);
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  font-size: $font-sm;
  cursor: pointer;

  &:focus {
    outline: none;
    border-color: var(--color-primary);
  }
}

.totalEntries {
  font-size: $font-sm;
  color: var(--color-text-primary);
  opacity: 0.8;
}

.actionButton {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: $radius-md;
  border: 1px solid var(--color-border);
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all $transition-fast;

  &:hover {
    background-color: oklch(0.96 0.02 250);
    border-color: var(--color-primary);
    color: var(--color-primary);
  }

  &:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

.actionIcon {
  width: 16px;
  height: 16px;
}

// Pagination
.pagination {
  display: flex;
  align-items: center;
  gap: $space-1;
}

.paginationButton {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: $radius-md;
  border: 1px solid var(--color-border);
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all $transition-fast;

  &:hover:not(:disabled) {
    background-color: oklch(0.96 0.02 250);
    border-color: var(--color-primary);
    color: var(--color-primary);
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  &:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

.paginationIcon {
  width: 16px;
  height: 16px;
}

.pageNumbers {
  display: flex;
  align-items: center;
  gap: $space-1;
}

.pageNumberButton {
  min-width: 36px;
  height: 36px;
  padding: 0 $space-2;
  border-radius: $radius-md;
  border: 1px solid var(--color-border);
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  font-size: $font-sm;
  cursor: pointer;
  transition: all $transition-fast;

  &:hover {
    background-color: oklch(0.96 0.02 250);
    border-color: var(--color-border);
  }

  &.pageNumberActive {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-text-inverse);
  }

  &:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

.pageEllipsis {
  padding: 0 $space-1;
  color: var(--color-text-primary);
  opacity: 0.5;
}

// Animations
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

// Responsive adjustments
@include respond(sm) {
  .tableActions {
    flex-direction: column;
    align-items: stretch;
  }

  .tableActionsLeft,
  .tableActionsRight {
    justify-content: center;
  }
}
